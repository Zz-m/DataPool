//insert  into `datapool`(`id`,`datainfo`,`datastatus`,`versionnum`,`actiondate`,`crdate`,`op`) values 
//(13,'<?xml version=\"1.0\" encodinf=\"utf-8\"?><log><client deviceid=\"1234\" ChangHong=\"5678\" didtoken=\"xxxx\"/>
//<data><![CDATA[2011-10-18:13:34:21|TVAction|PowerOn;
//2011-11-18:14:12:12|AppStore|Download|999|百度地图;
//2011-11-18:16:56:12|AppStore|Download|48271|酒店导航]]>
//</data></log>',1,'1318925923359','2011-10-18 16:19:15','2011-10-18 16:18:43',''),
//(14,'<?xml version=\"1.0\" encodinf=\"utf-8\"?><log><client deviceid=\"1234\" ChangHong=\"5678\"didtoken=\"xxxx\"/>
//<data><![CDATA[2011-10-18:13:34:21|TVAction|PowerOn;
//2011-10-18:19:36:33|Channel|TV|湖南卫视|88.8Mhz;
//2011-11-18:14:12:12|AppStore|Download|999|百度地图;
//2011-11-18:16:56:12|AppStore|Download|48271|酒店导航]]>
//</data></log>',1,'1318930232671','2011-10-18 17:30:46','2011-10-18 17:30:32',''),
//(15,'<?xml version=\"1.0\" encoding=\"utf-8\"?><log><client dnum=\"1234\" didtoken=\"xxxx\" />
//<data><![CDATA[2011-10-25|16:59|AppStore|Run|1235|QQ游戏;2011-10-25|16:59|MediaPlayer|TPSPlayer|FAILED_BUFFER|非诚勿扰;
//2011-10-25|16:59|AppStore|Quit;2011-10-25|16:59|MediaPlayer|TPSPlayer|Enter|黑客帝国3矩阵革命;
//2011-10-25|16:59|MediaPlayer|TPSPlayer|Enter|十一罗汉;2011-10-25|16:59|TVAction|PowerOn;
//2011-10-25|16:59|NetAction|Login|Fail|192.168.2.1;2011-10-25|16:59|AppStore|Run|1235|QQ游戏;
//2011-10-25|16:59|',1,'1319533983234','2011-10-26 08:35:23','2011-10-25 17:13:03',NULL),
//(33,'<?xml version=\"1.0\" encoding=\"utf-8\"?><log>
//<client dnum=\"1234\" didtoken=\"xxxx\" /><data><![CDATA[2000-01-02:08:41:32|AppStore|Enter;
//2000-01-02:08:41:32|TVAction|SoftwareUpdate|USB|v1.0.0|v1.0.8;2000-01-02:08:41:32|WatchAction|TV|90.8Mhz;
//2000-01-02:08:41:32|WatchAction|VGA;2000-01-02:08:41:32|TVAction|SoftwareUpdate|CABLE|v1.0.2|v1.1.8;
//2000-01-02:08:41:32|NetAction|OnLine|192.168.2.1;2000-01-02:08:41:32|AppStore|Download|1234|百度地图;
//2000-01-02:08:41:32|AppStore|Download|1234|百度地图;2000-01-02:08:41:32|TVAction|SoftwareUpdate|NET|v1.0.1|v1.0.9;
//2000-01-02:08:41:33|AppStore|Run|1235|QQ游戏;2000-01-02:08:41:33|MediaPlayer|TPSPlayer|FAILED_BUFFER|非诚勿扰;
//2000-01-02:08:41:33|WatchAction|DVB;2000-01-02:08:41:33|WatchAction|TV|109.8Mhz;
//2000-01-02:08:41:33|NetAction|OnLine|192.168.2.1;2000-01-02:08:41:33|MediaPlayer|TPSPlayer|Start|非诚勿扰;
//2000-01-02:08:41:33|MediaPlayer|TPSPlayer|Enter|赶尽杀绝;2000-01-02:08:41:33|NetAction|Login|Success|192.168.2.1;
//2000-01-02:08:41:33|WatchAction|DVB;2000-01-02:08:41:33|MediaPlayer|TPSPlayer|Enter|藏獒多吉;
//2000-01-02:08:41:34|AppStore|Run|1234|百度地图;2000-01-02:08:41:34|TVAction|PowerOff;
//2000-01-02:08:41:34|MediaPlayer|TPSPlayer|Enter|赶尽杀绝;2000-01-02:08:41:34|Search|Stock|长虹;
//2000-01-02:08:41:34|TVAction|SoftwareUpdate|NET|v1.0.1|v1.0.9;2000-01-02:08:41:34|AppStore|Uninstall|1234|百度地图;
//2000-01-02:08:41:34|NetAction|Login|Success|192.168.2.1;2000-01-02:08:41:34|WatchAction|DVB;
//2000-01-02:08:41:34|Search|Stock|长虹;2000-01-02:08:41:35|WatchAction|S-VIDEO;2000-01-02:08:41:35|TVAction|PowerOff;
//2000-01-02:08:41:35|TVAction|SoftwareUpdate|CABLE|v1.0.2|v1.1.8;2000-01-02:08:41:35|NetAction|OffLine;
//2000-01-02:08:41:35|Browser|Enter|http://www.taobao.com.cn;2000-01-02:08:41:35|NetAction|Login|Fail|192.168.2.1;
//2000-01-02:08:41:35|WatchAction|TV|90.8Mhz;2000-01-02:08:41:35|WatchAction|DVB;2000-01-02:08:41:35|WatchAction|DVB;
//2000-01-02:08:41:35|MediaPlayer|TPSPlayer|Enter|非诚勿扰;2000-01-02:08:41:36|Search|Movie|赶尽杀绝;
//2000-01-02:08:41:36|MediaPlayer|TPSPlayer|Start|非诚勿扰;2000-01-02:08:41:36|MediaPlayer|TPSPlayer|Enter|史前一万年;
//2000-01-02:08:41:36|WatchAction|AV;2000-01-02:08:41:36|TVAction|SoftwareUpdate|NET|v1.0.1|v1.0.9;
//2000-01-02:08:41:36|WatchAction|TV|109.8Mhz;2000-01-02:08:41:36|AppStore|Uninstall|1234|百度地图;
//2000-01-02:08:41:36|MediaPlayer|TPSPlayer|Enter|非诚勿扰;2000-01-02:08:41:36|NetAction|Login|Success|192.168.2.1;
//2000-01-02:08:41:36|MediaPlayer|TPSPlayer|OK|非诚勿扰;2000-01-02:08:41:37|MediaPlayer|TPSPlayer|Enter|史前一万年;
//2000-01-02:08:41:37|WatchAction|AV;2000-01-02:08:41:37|AppStore|Run|1235|QQ游戏;2000-01-02:08:41:37|WatchAction|TV|88.8Mhz;
//2000-01-02:08:41:37|WatchAction|AV;2000-01-02:08:41:37|Browser|Enter|http://www.sina.com.cn;
//2000-01-02:08:41:37|TVAction|PowerOff;2000-01-02:08:41:37|Search|Movie|赶尽杀绝;20

/*CREATE TABLE `datapool` (
 `id` int(11) NOT NULL AUTO_INCREMENT,
 `datainfo` mediumtext NOT NULL,
 `datastatus` int(6) NOT NULL,
 `versionnum` varchar(32) NOT NULL,
 `actiondate` datetime DEFAULT NULL,
 `crdate` datetime DEFAULT NULL,
 `op` varchar(32) DEFAULT NULL,
 PRIMARY KEY (`id`)
 ) ENGINE=InnoDB AUTO_INCREMENT=2554181 DEFAULT CHARSET=gbk CHECKSUM=1 ROW_FORMAT=DYNAMIC;*/

package com.adj.test;

import java.util.regex.*;
import org.junit.Test;

public class RegexTest {

	/**
	 * @param args
	 */
	@Test
	public void test() {
		String result1 = null;
		String[] result2 = new String[6];
		// String tvSign = null;
		String matchString = "insert into `datapool`(`id`,`datainfo`,`datastatus`,`versionnum`,`actiondate`,`crdate`,`op`) "
				+ "values (13,'<?xml version=\"1.0\" encodinf=\"utf-8\"?><log><client deviceid=\"1234\" ChangHong=\"5678\" "
				+ "didtoken=\"xxxx\"/><data><![CDATA[2011-10-18:13:34:21|TVAction|PowerOn;"
				+ "2011-11-18:14:12:12|AppStore|Download|999|百度地图;2011-11-18:16:56:12|AppStore|Download|48271|酒店导航]]>"
				+ "</data></log>',1,'1318925923359','2011-10-18 16:19:15','2011-10-18 16:18:43',''),"
				+ "(14,'<?xml version=\"1.0\" encodinf=\"utf-8\"?><log><client deviceid=\"1234\" ChangH";
		Pattern pattern1 = Pattern.compile("\\([^)]*\\)");
		Matcher matcher1 = pattern1.matcher(matchString);

		while (matcher1.find()) {
			result1 = matcher1.group();
			// System.out.println(result1);
			result2 = getResult2(result1);
			if (result2 != null)
				for (int i = 0; i < result2.length; i++) {
					System.out.println(result2[i]);
					// matchString.replace(device, "");
					// System.out.println(matchString);
				}

		}
		// public void test() {
		// String device = null;
		// //String tvSign = null;
		// String matchString =
		// "insert  into `datapool`(`id`,`datainfo`,`datastatus`,`versionnum`,`actiondate`,`crdate`,`op`) values ";
		// Pattern pattern1 = Pattern.compile("/(\\w|[\u4E00-\u9FA5])+(-|\\.)");
		// Matcher matcher1 = pattern1.matcher(matchString);
		// if (matcher1.find()){
		// device = matcher1.group();
		// device = device.substring(1);
		// device = device.substring(0,device.length()-1);
		// device.trim();
		// }

		// Pattern pattern2 = Pattern.compile("\\s(\\w|[\u4E00-\u9FA5])+$");
		// Matcher matcher2 = pattern2.matcher(matchString);
		// if (matcher2.find()){
		// tvSign = matcher2.group();
		// tvSign.trim();
		// System.out.println("设备名："+device+"     "+"电视台："+tvSign);
		// }

	}

	private String[] getResult2(String result1) {
		int index = 0;
		String resulta;
		String[] resultb = new String[6];
		Pattern pattern1 = Pattern.compile("(^|,)[^,]*(,|&)");
		Matcher matcher1 = pattern1.matcher(result1);

		try {
			while (matcher1.find()) { // 重写try catch 防止数组溢出

				resulta = matcher1.group();
				result1 = result1.replace(resulta, "");
				matcher1 = pattern1.matcher(result1);
				// System.out.println(resulta);
				boolean flag1 = true;
				boolean flag2 = true;
				while (flag1) {
					// String s = new Character('a').toString();
					if (resulta.charAt(0) == new Character(',')
							|| resulta.charAt(0) == new Character('\'')
							|| resulta.charAt(0) == new Character('(')
							|| resulta.charAt(0) == new Character(')')) {
						resulta = resulta.substring(1, resulta.length());
					} else {
						flag1 = false;
					}
				}
				while (flag2) {
					// String s = new Character('a').toString();
					if (resulta.charAt(resulta.length() - 1) == new Character(
							',')
							|| resulta.charAt(resulta.length() - 1) == new Character(
									'\'')
							|| resulta.charAt(resulta.length() - 1) == new Character(
									'(')
							|| resulta.charAt(resulta.length() - 1) == new Character(
									')')) {
						resulta = resulta.substring(0, resulta.length() - 1);
					} else {
						flag2 = false;
					}
				}
				resultb[index] = resulta;
				index++;

				// result2 = getResult2(result1);
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			System.out.println("数据错误，跳过插入操作");
			return null;
		}
		return resultb;
	}

	// @Test
	// public void Test21() {
	// int index = 0;
	// String result1 =
	// "(13,'<?xml version=\"1.0\" encodinf=\"utf-8\"?><log><client deviceid=\"1234\" ChangHong=\"5678\" "
	// +
	// "didtoken=\"xxxx\"/><data><![CDATA[2011-10-18:13:34:21|TVAction|PowerOn;"
	// +
	// "2011-11-18:14:12:12|AppStore|Download|999|百度地图;2011-11-18:16:56:12|AppStore|Download|48271|酒店导航]]>"
	// +
	// "</data></log>',1,'1318925923359','2011-10-18 16:19:15','2011-10-18 16:18:43','')";
	// String resulta;
	// String[] resultb = new String[55];
	// Pattern pattern1 = Pattern.compile("(^|,)[^,]*(,|&)");
	// Matcher matcher1 = pattern1.matcher(result1);
	// int a = 0;
	// while (matcher1.find()) {
	//
	// resulta = matcher1.group();
	// result1 = result1.replace(resulta, "");
	// matcher1 = pattern1.matcher(result1);
	// System.out.println(resulta);
	// resultb[index] = resulta;
	// index++;
	// a++;
	// // result2 = getResult2(result1);
	//
	// }
	// for (int i = 0; i < resultb.length; i++) {
	// System.out.println(resultb[i]);
	// }
	//
	// }

}
